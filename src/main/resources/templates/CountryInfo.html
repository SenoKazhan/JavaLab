<!DOCTYPE html>
<html lang="en">
<head>
    <title>Country Info</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }

        h1, h2, h3 {
            color: #333;
        }

        button {
            background-color: #007BFF;
            color: white;
            padding: 10px 20px;
            margin: 10px 0;
            border: none;
            cursor: pointer;
            width: auto;
        }

        button:hover {
            opacity: 0.8;
        }

        input[type=text] {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
        }

        .json-output {
            background-color: #f0f0f0;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<h1>Country Info</h1>

<label for="phoneCode">Phone Code:</label>
<input id="phoneCode" placeholder="Phone Code" type="text">
<button onclick="getCountryInfoByPhoneCode()">Get Country Info By Phone Code</button>
<div id="countryInfoByPhoneCode"></div>

<label for="countryId">Country ID:</label>
<input id="countryId" placeholder="Country ID" type="text">
<button onclick="getCountryInfoById()">Get Country Info By ID</button>
<div id="countryInfoById"></div>

<label for="languageCountryId">Country ID for Language:</label>
<input id="languageCountryId" placeholder="Country ID" type="text">

<label for="languageName">Language Name:</label>
<input id="languageName" placeholder="Language Name" type="text">

<button onclick="addLanguageToCountry()">Add Language To Country</button>
<div id="addLanguageResult"></div>

<script>
    function getCountryInfoByPhoneCode() {
        const phoneCode = document.getElementById('phoneCode').value;
        fetch(`http://localhost:8080/api/countries/getCodeInfo?phonecode=${phoneCode}`)
            .then(response => response.json())
            .then(countries => {
                let output = '';
                countries.forEach(country => {
                    const cities = country.cities.map(city => city.name).join(', ');
                    output += `<h2>${country.name}</h2>`;
                    output += `<p>Code: ${country.code}</p>`;
                    output += `<p>Phone: ${country.phone}</p>`;
                    output += `<p>Cities: ${cities}</p>`;
                });
                const countryInfoDiv = document.getElementById('countryInfoByPhoneCode');
                countryInfoDiv.innerHTML = output;
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
    function getCountryInfoById() {
        const countryId = document.getElementById('countryId').value;
        fetch(`http://localhost:8080/api/countries/${countryId}`)
            .then(response => response.json())
            .then(country => {
                const countryInfoDiv = document.getElementById('countryInfoById');
                countryInfoDiv.innerHTML = '<pre class="json-output">' + JSON.stringify(country, null, 2) + '</pre>';
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }

    function addLanguageToCountry() {
        const countryId = document.getElementById('languageCountryId').value;
        const languageName = document.getElementById('languageName').value;
        const language = {name: languageName};
        fetch(`http://localhost:8080/api/countries/alc/${countryId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(language)
        })
            .then(response => response.text())
            .then(result => {
                const addLanguageResultDiv = document.getElementById('addLanguageResult');
                addLanguageResultDiv.innerHTML = '<pre class="json-output">' + result + '</pre>';
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
</script>
</body>
</html>